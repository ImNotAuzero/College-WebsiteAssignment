<!doctype html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Ocean View Hotel, luxury rooms at phenominal pricing.">
  <title>Ocean View - Reviews</title>

  <!-- jQuery -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

  <!-- Placeholder image generator -->
  <script src="/js/placeholders.images.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link href="/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <script src="/js/bootstrap.min.js"></script>
  <link href="/css/style.css" rel="stylesheet">

  <!-- Load navbar / footer -->
  <script>
    $(function () {
      // We add / to the load because we are on a different route
      $("#navbar-content").load("/navbar.html");
      $("#footer-content").load("/footer.html");
    });
  </script>

  <script>
    $(document).ready(function(){
    $.ajax({ url: "/reviews/all",
    success: function(res){
      if(!res.length) {
        return $('#reviews-table').append(`
          <center>
            <div class="breakpoint">
              <h5>We're terribly sorry. But there are no reviews at this moment in time. Please come back later.</h5>
            </div>
          </center>
        `)
      }

      for(let review in res) {
        $('#review-body').append(`
            <tr>
              <th scope="row">${(review)+1}</th>
              <td>${res[review].email}</td>
              <td>${res[review].rating}</td>
              <td>${res[review].review}</td>
            </tr>
        `)
      }
    }});
    });
  </script>
</head>

<body>
  <div id="navbar-content"></div>

  <main>
    <div class="container">
      <br><br><br>
      <center>
        <h1>See what people think of our Hotel</h1>
        <p>With real reviews from real customers, we can assure you that at our Hotel you will experience something so unique that it's beyond words... Don't take our words for it though.</p>
      </center>

      <div id="reviews-table">
        <table class="table">
          <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col">Name</th>
              <th scope="col">Rating</th>
              <th scope="col">Review</th>
            </tr>
          </thead>
          <tbody id="review-body"></tbody>
        </table>
      </div>
    </div>

    <div id="footer-content"></div>
  </main>
</body>

</html>